!function t(e,r,i){function n(o,a){if(!r[o]){if(!e[o]){var s="function"==typeof require&&require;if(!a&&s)return s(o,!0);if(T)return T(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[o]={exports:{}};e[o][0].call(l.exports,function(t){var r=e[o][1][t];return n(r||t)},l,l.exports,t,e,r,i)}return r[o].exports}for(var T="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e,r){const i=t("./fReader.js"),n=t("./Header.js"),T=t("./Tag.js"),o=t("./Frame.js"),a=["BUF","CNT","COM","CRA","CRM","ETC","EQU","GEO","IPL","LNK","MCI","MLL","PIC","POP","REV","RVA","SLT","STC","TAL","TBP","TCM","TCO","TCR","TDA","TDY","TEN","TFT","TIM","TKE","TLA","TLE","TMT","TOA","TOF","TOL","TOR","TOT","TP1","TP2","TP3","TP4","TPA","TPB","TRC","TRD","TRK","TSI","TSS","TT1","TT2","TT3","TXT","TXX","TYE","UFI","ULT","WAF","WAR","WAS","WCM","WCP","WPB","WXX"],s=["AENC","APIC","ASPI","ASPI","COMM","COMR","ENCR","EQU2","EQU2","EQUA","ETCO","GEOB","GRID","IPLS","LINK","MCDI","MLLT","OWNE","PCNT","POPM","POSS","PRIV","RBUF","RVA2","RVA2","RVAD","RVRB","SEEK","SEEK","SIGN","SIGN","SYLT","SYTC","TALB","TBPM","TCOM","TCON","TCOP","TDAT","TDEN","TDEN","TDLY","TDOR","TDOR","TDRC","TDRC","TDRL","TDRL","TDTG","TDTG","TENC","TEXT","TFLT","TIME","TIPL","TIPL","TIT1","TIT2","TIT3","TKEY","TLAN","TLEN","TMCL","TMCL","TMED","TMOO","TMOO","TOAL","TOFN","TOLY","TOPE","TORY","TOWN","TPE1","TPE2","TPE3","TPE4","TPOS","TPRO","TPRO","TPUB","TRCK","TRDA","TRSN","TRSO","TSIZ","TSOA","TSOA","TSOP","TSOP","TSOT","TSOT","TSRC","TSSE","TSST","TSST","TXXX","TYER","UFID","USER","USLT","WCOM","WCOP","WOAF","WOAR","WOAS","WORS","WPAY","WPUB","WXXX"];e.exports=async function(t){let e=i(t);const r=n(await e.slice(0,3).toString(),await e.getPositiveNumber(3,4),await e.getPositiveNumber(5),await e.getPositiveNumber(7,10)),u=[];if(e=e.slice(10),r.extended)throw new Error("FID3: Extended header not implemented");if(r.version>2){let t=await e.slice(0,4).toString();for(;s.indexOf(t)>-1;){const r=await e.getPositiveNumber(4,8),i=await e.getPositiveNumber(8,10);u.push(o(t,r,i,e.slice(10))),e=e.slice(10+r),t=await e.slice(0,4).toString()}}else{let t=await e.slice(0,3).toString();for(;a.indexOf(t)>-1;){const r=await e.getPositiveNumber(3,6);u.push(o(t,r,0,e.slice(6))),e=e.slice(6+r),t=await e.slice(0,3).toString()}}return T(r,u)}},{"./Frame.js":2,"./Header.js":3,"./Tag.js":4,"./fReader.js":5}],2:[function(t,e,r){const i={async text(t){const e=await t.getPositiveNumber(0);return(await(await t.slice(1,t.length)).toString(e%3!=0)).replace("\0","")},url:async t=>await t.toString(),async picture(t){const e=await(await t.slice(1,64)).toUint8Arr();let r=0;for(;0!==e[r];r++);String.fromCharCode.apply(null,e.slice(0,r));for(0===e[r]&&r++;0!==e[r];r++);for(;0===e[r];r++);return(await t.slice(r+1)).toBlob()}};e.exports=function(t,e,r,n){let T=null;return{get id(){return t},get size(){return e},get flags(){return r},get value(){if(null===T)throw new Error("You must read the frame before accessing its value.");return T},async read(){const r=await n.slice(0,e);return"T"===t[0]&&"TXXX"!==t?(T=await i.text(r),!0):"W"===t[0]?(T=await i.url(r),!0):t.indexOf("PIC")>-1&&(T=await i.picture(r),!0)}}}},{}],3:[function(t,e,r){e.exports=function(t,e,r,i){r=[r/8,r/4%2,r/2%2,r%2].map(Math.floor);return{get isId3(){return"ID3"===t},get version(){return this.isId3?e:-1},get flags(){return this.isId3?r:[]},get unsync(){return!!this.isId3&&1===r[0]},get extended(){return!!this.isId3&&1===r[1]},get exp(){return!!this.isId3&&1===r[2]},get foot(){return!!this.isId3&&1===r[3]},get size(){return this.isId3?i:-1}}}},{}],4:[function(t,e,r){const i={TALB:"album",TAL:"album",PIC:"picture",APIC:"picture",TP1:"artist",TPE1:"artist",TIT2:"title",TT2:"title",TYER:"year",TYE:"year",TDRC:"year",TRCK:"track",TRK:"track",TCON:"genre",TCO:"genre"};e.exports=function(t,e){const r={frames:e};for(const t of e){const e=i[t.id];void 0!==e&&(r[e]=t)}return r.header=t,r}},{}],5:[function(t,e,r){const i=function(t){if(["[object File]","[object Blob]","buffer"].indexOf(t.toString())<0)throw new Error("Invalid file.");const e=function(){return new Promise((e,r)=>{const i=new FileReader;i.onload=(t=>e(t.target.result)),i.onerror=(t=>r(t)),i.readAsArrayBuffer(t)})};return{slice(e,r=t.size){if("number"!=typeof e|"number"!=typeof r)throw new TypeError("slice: Must be a number.");return e>r?null:i(t.slice(e,r))},get length(){return t.size},async getPositiveNumber(t,e){if("number"!=typeof t)throw new TypeError("getPositiveNumber: Must be a number.");if("number"!=typeof e&&(e=t+1),t>e)return 0;let r=0;const i=await(await this.slice(t,e)).toUint8Arr();for(let t=0;t<i.length;t++)r+=i[t]*256**(i.length-t-1);return r},toBlob:async()=>await t.slice(),toUint8Arr:async()=>new Uint8Array(await e()),toUint16Arr:async()=>new Uint16Array(await e()),async toString(t=!1){return t?String.fromCharCode.apply(null,await this.toUint16Arr()):String.fromCharCode.apply(null,await this.toUint8Arr())}}};e.exports=i},{}],6:[function(t,e,r){(function(e){e.FID3=t("./FID3")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./FID3":1}]},{},[6]);